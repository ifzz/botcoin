#!/usr/bin/env python3
import timeit
import numpy as np


def list_comprehensions_or_numpy_for_latest_baras():
    """
    This test was used to check if it was better to access columns in latest_bars (close, open, etc)
    through list comprehension or through numpy array functions.

    It is clearly better to use list comprehension in this case
    """
    #Result - 0.06962726599886082
    print(timeit.timeit('o1 = [i[1] for i in latest_bars]', number=10000, setup='latest_bars = [("2015-05-15 20:55:00", 237.44200000000001, 237.59999999999999, 237.363, 237.363, 1.7027823900000001), ("2015-05-15 21:00:00", 237.416, 237.416, 236.97400000000002, 237.363, 5.0466696999999998), ("2015-05-15 21:05:00", 237.363, 237.363, 237.27700000000002, 237.30000000000001, 0.38013168000000003), ("2015-05-15 21:10:00", 237.30000000000001, 237.59999999999999, 236.86700000000002, 236.86700000000002, 1.2180437399999999), ("2015-05-15 21:15:00", 236.97400000000002, 236.97400000000002, 236.90299999999999, 236.97400000000002, 6.3209604800000001), ("2015-05-15 21:20:00", 236.97400000000002, 236.97400000000002, 236.96299999999999, 236.97400000000002, 6.6752547000000009), ("2015-05-15 21:25:00", 236.97400000000002, 236.97400000000002, 236.50400000000002, 236.97400000000002, 3.9252906200000002), ("2015-05-15 21:30:00", 236.97400000000002, 236.97400000000002, 236.512, 236.97400000000002, 6.0821394), ("2015-05-15 21:35:00", 236.87200000000001, 236.97400000000002, 236.87200000000001, 236.97400000000002, 0.1198), ("2015-05-15 21:40:00", 236.44400000000002, 238.0, 236.44400000000002, 237.31799999999998, 96.546639999999996), ("2015-05-15 21:45:00", 237.32299999999998, 237.33099999999999, 236.97400000000002, 237.33099999999999, 31.967986), ("2015-05-15 21:50:00", 237.33099999999999, 237.46000000000001, 237.25700000000001, 237.46000000000001, 4.6021289999999997), ("2015-05-15 21:55:00", 237.33700000000002, 237.34900000000002, 237.33099999999999, 237.345, 2.7464047000000003), ("2015-05-15 22:00:00", 237.345, 237.34900000000002, 237.33099999999999, 237.333, 9.8498584999999999), ("2015-05-15 22:05:00", 237.34299999999999, 237.34900000000002, 237.33099999999999, 237.33099999999999, 1.855), ("2015-05-15 22:10:00", 237.33099999999999, 237.34900000000002, 237.33099999999999, 237.34900000000002, 10.657055300000001), ("2015-05-15 22:15:00", 237.33099999999999, 237.63400000000001, 237.33099999999999, 237.33099999999999, 1.5346358), ("2015-05-15 22:20:00", 237.398, 237.625, 237.33099999999999, 237.625, 1.022), ("2015-05-15 22:25:00", 237.64700000000002, 237.95699999999999, 237.64700000000002, 237.64700000000002, 3.7443099000000002), ("2015-05-15 22:30:00", 237.66, 237.66, 237.66, 237.66, 0.011000000000000001)]'))
    #Result - 7.9345392159993935
    print(timeit.timeit('o2 = np.asarray(latest_bars)[:,1]', number=10000, setup='import numpy as np; latest_bars = [("2015-05-15 20:55:00", 237.44200000000001, 237.59999999999999, 237.363, 237.363, 1.7027823900000001), ("2015-05-15 21:00:00", 237.416, 237.416, 236.97400000000002, 237.363, 5.0466696999999998), ("2015-05-15 21:05:00", 237.363, 237.363, 237.27700000000002, 237.30000000000001, 0.38013168000000003), ("2015-05-15 21:10:00", 237.30000000000001, 237.59999999999999, 236.86700000000002, 236.86700000000002, 1.2180437399999999), ("2015-05-15 21:15:00", 236.97400000000002, 236.97400000000002, 236.90299999999999, 236.97400000000002, 6.3209604800000001), ("2015-05-15 21:20:00", 236.97400000000002, 236.97400000000002, 236.96299999999999, 236.97400000000002, 6.6752547000000009), ("2015-05-15 21:25:00", 236.97400000000002, 236.97400000000002, 236.50400000000002, 236.97400000000002, 3.9252906200000002), ("2015-05-15 21:30:00", 236.97400000000002, 236.97400000000002, 236.512, 236.97400000000002, 6.0821394), ("2015-05-15 21:35:00", 236.87200000000001, 236.97400000000002, 236.87200000000001, 236.97400000000002, 0.1198), ("2015-05-15 21:40:00", 236.44400000000002, 238.0, 236.44400000000002, 237.31799999999998, 96.546639999999996), ("2015-05-15 21:45:00", 237.32299999999998, 237.33099999999999, 236.97400000000002, 237.33099999999999, 31.967986), ("2015-05-15 21:50:00", 237.33099999999999, 237.46000000000001, 237.25700000000001, 237.46000000000001, 4.6021289999999997), ("2015-05-15 21:55:00", 237.33700000000002, 237.34900000000002, 237.33099999999999, 237.345, 2.7464047000000003), ("2015-05-15 22:00:00", 237.345, 237.34900000000002, 237.33099999999999, 237.333, 9.8498584999999999), ("2015-05-15 22:05:00", 237.34299999999999, 237.34900000000002, 237.33099999999999, 237.33099999999999, 1.855), ("2015-05-15 22:10:00", 237.33099999999999, 237.34900000000002, 237.33099999999999, 237.34900000000002, 10.657055300000001), ("2015-05-15 22:15:00", 237.33099999999999, 237.63400000000001, 237.33099999999999, 237.33099999999999, 1.5346358), ("2015-05-15 22:20:00", 237.398, 237.625, 237.33099999999999, 237.625, 1.022), ("2015-05-15 22:25:00", 237.64700000000002, 237.95699999999999, 237.64700000000002, 237.64700000000002, 3.7443099000000002), ("2015-05-15 22:30:00", 237.66, 237.66, 237.66, 237.66, 0.011000000000000001)]'))

if __name__ == '__main__':
    pass
    list_comprehensions_or_numpy_for_latest_baras()